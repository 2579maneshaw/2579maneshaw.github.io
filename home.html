<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Enchanted Villa of Windsor Hills | Disney Midday Break Retreat</title>
  <meta name="description" content="Where the energy settles, the family resets, and the magic carries on. Close enough for a Disney midday break, steps from Windsor Hills amenities." />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; }
    html, body { width: 100%; }
    img { max-width: 100%; height: auto; }

    body { margin:0; font-family: Arial, Helvetica, sans-serif; background:#fff; color:#222; }
    .wrap { max-width: 1100px; width:100%; margin: 0 auto; padding: 26px 18px 64px; }

    /* Top brand + nav */
    .topbar { display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap; }
    .brandLockup { display:flex; align-items:center; gap:14px; min-width: 0; }
    .brand-logo { display:block; width:100%; max-width:170px; height:auto; }
    .brandText { line-height:1.12; min-width:0; }
    .brandName { margin:0; font-size:1.15rem; letter-spacing:-0.02em; }
    .brandTag { margin:6px 0 0; color:#555; font-size:0.96rem; }

    nav { display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
    nav a {
      text-decoration:none; color:#111; font-size:0.95rem;
      padding:10px 12px; border-radius:999px;
      border:1px solid #eee; background:#fafafa;
    }
    nav a:hover { background:#f2f2f2; }
    nav a.active { background:#111; color:#fff; border-color:#111; }

    @media (max-width: 860px) {
      .topbar { justify-content:flex-start; }
      nav { justify-content:flex-start; }
      .brand-logo { max-width: 150px; }
    }

    /* Hero */
    .hero {
      margin-top: 18px;
      border-radius: 18px;
      padding: 22px;
      background: radial-gradient(1200px 500px at 20% 0%, #f4fbff 0%, #ffffff 55%, #fff7ee 100%);
      border: 1px solid #eee;
      box-shadow: 0 14px 32px rgba(0,0,0,0.06);
    }
    .headline {
      margin:0;
      font-size: 2.25rem;
      letter-spacing: -0.03em;
      line-height: 1.08;
      color:#111;
      max-width: 920px;
    }
    .subline {
      margin: 12px 0 0;
      font-size: 1.08rem;
      color:#333;
      line-height:1.6;
      max-width: 900px;
    }

    /* Tags (not button-y) */
    .chips { margin-top: 14px; display:flex; gap:10px; flex-wrap:wrap; }
    .chip {
      font-size:0.92rem;
      color:#333;
      background: transparent;
      border: 0;
      padding: 0;
      border-radius: 0;
      display:flex;
      align-items:center;
      gap:8px;
      opacity: 0.95;
    }
    .chip::before{
      content:"";
      width:7px;
      height:7px;
      border-radius:999px;
      background:#111;
      opacity: 0.55;
      flex: 0 0 auto;
    }

    .ctaRow { margin-top: 16px; display:flex; gap:10px; flex-wrap:wrap; }
    .btn {
      display:inline-block; text-decoration:none;
      padding: 12px 18px; border-radius: 12px;
      font-size: 1rem; border:1px solid #111;
    }
    .btn.primary { background:#111; color:#fff; }
    .btn.primary:hover { background:#2a2a2a; border-color:#2a2a2a; }
    .btn.ghost { background:#fff; color:#111; border-color:#e6e6e6; }
    .btn.ghost:hover { background:#f7f7f7; }

    /* Sections */
    .sectionTitle { margin: 26px 0 10px; font-size: 1.35rem; letter-spacing:-0.02em; color:#111; }

    .featureGrid {
      display:grid;
      grid-template-columns: 0.92fr 1.08fr;
      gap:18px;
      align-items:start;
    }
    @media (max-width: 920px) { .featureGrid { grid-template-columns: 1fr; } }

    .card {
      border:1px solid #eee;
      border-radius:16px;
      padding:16px;
      background:#fff;
      box-shadow: 0 10px 26px rgba(0,0,0,0.05);
      min-width:0;
    }

    .card h2 { margin:0 0 10px; font-size:1.25rem; letter-spacing:-0.02em; }
    .card p { margin:0 0 10px; color:#333; line-height:1.65; }

    .bullets { margin:10px 0 0; padding-left: 18px; color:#333; line-height:1.75; }
    .bullets li { margin: 6px 0; }

    /* Featured + strip gallery */
    .galleryWrap { display:flex; flex-direction:column; gap:12px; }
    .featuredBtn {
      padding: 0;
      border: 0;
      background: transparent;
      cursor: pointer;
      border-radius: 16px;
      overflow: hidden;
      position: relative;
    }
    .featuredBtn:focus { outline: 2px solid #111; outline-offset: 3px; }

    .featuredImg {
      width:100%;
      height: 330px;
      border-radius: 16px;
      border:1px solid #eee;
      object-fit: cover;
      background:#f3f3f3;
      display:block;
    }
    @media (max-width: 720px) { .featuredImg { height: 260px; } }

    .zoomHint {
      position:absolute;
      right:12px;
      bottom:12px;
      font-size:0.92rem;
      background: rgba(0,0,0,0.55);
      color:#fff;
      padding:8px 10px;
      border-radius: 999px;
      pointer-events:none;
    }

    .miniGallery {
      display:flex;
      gap:10px;
      overflow-x:auto;
      padding-bottom:6px;
      -webkit-overflow-scrolling: touch;
    }
    .miniGallery img {
      height: 110px;
      width: 170px;
      object-fit: cover;
      border-radius: 14px;
      border: 1px solid #eee;
      background:#f3f3f3;
      flex: 0 0 auto;
      cursor: pointer;
      opacity: 0.92;
    }
    .miniGallery img:hover { opacity: 1; }
    .miniGallery img.active { outline: 2px solid #111; outline-offset: 2px; opacity: 1; }

    /* Faith statement */
    .welcomeNote {
      margin-top: 14px;
      border-radius: 14px;
      background:#fafafa;
      border:1px solid #eee;
      padding: 14px;
      color:#333;
      line-height:1.6;
      font-size:0.98rem;
    }

    .footer { text-align:center; margin-top: 44px; color:#666; font-size:0.92rem; }

    /* Lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.84);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 9999;
    }
    .lightbox.open { display:flex; }

    .lightboxInner { width: min(1100px, 100%); position: relative; }
    .lightboxImg {
      width: 100%;
      max-height: calc(100vh - 120px);
      object-fit: contain;
      border-radius: 14px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      display:block;
    }
    .lbTopRow {
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap:10px;
      margin-bottom: 10px;
      color: rgba(255,255,255,0.9);
      font-size: 0.95rem;
    }
    .lbBtn {
      border: 0;
      cursor: pointer;
      border-radius: 12px;
      padding: 10px 12px;
      background: rgba(255,255,255,0.92);
      color:#111;
      font-size: 0.95rem;
    }
    .lbBtn:hover { background: #fff; }

    .lbNav {
      position:absolute;
      top: 50%;
      transform: translateY(-50%);
      display:flex;
      gap:10px;
      width: 100%;
      justify-content: space-between;
      padding: 0 10px;
      pointer-events: none;
    }
    .lbArrow {
      pointer-events: auto;
      width: 46px;
      height: 46px;
      border-radius: 999px;
      border: 0;
      cursor: pointer;
      background: rgba(255,255,255,0.92);
      font-size: 1.1rem;
      color:#111;
    }
    .lbArrow:hover { background:#fff; }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="brandLockup">
        <picture>
          <source type="image/webp" srcset="photos/EVWHlogo-320w.webp 320w, photos/EVWHlogo-600w.webp 600w">
          <img
            src="photos/EVWHlogo-600w.jpg"
            srcset="photos/EVWHlogo-320w.jpg 320w, photos/EVWHlogo-600w.jpg 600w"
            sizes="170px"
            alt="Enchanted Villa of Windsor Hills logo"
            class="brand-logo"
            width="170"
            height="158"
            decoding="async"
            loading="eager"
          />
        </picture>

        <div class="brandText">
          <p class="brandName"><strong>Enchanted Villa of Windsor Hills</strong></p>
          <p class="brandTag">Family friendly Disney retreat</p>
        </div>
      </div>

      <nav aria-label="Site navigation">
        <a class="active" href="home.html">Home</a>
        <a href="index.html">Our Villa</a>
        <a href="nearby.html">Nearby</a>
        <a href="attractions.html">Attractions</a>
        <a href="windsor-hills.html">Windsor Hills</a>
      </nav>
    </div>

    <section class="hero" aria-label="Intro">
      <h1 class="headline">Where the energy settles, the family resets, and the magic carries on.</h1>
      <p class="subline">
        Rejuvenate your body. Restore your mind.
        <strong>Close enough to the Disney parks for a midday break</strong> so every Disney day feels just as magical as the first.
      </p>

      <div class="chips" aria-label="Highlights">
        <span class="chip">Midday break friendly</span>
        <span class="chip">Steps to Windsor Hills amenities</span>
        <span class="chip">Private screened splash pool</span>
        <span class="chip">Spa inspired calm</span>
      </div>

      <div class="ctaRow">
        <a class="btn primary" href="https://www.signaturevillasorlando.com/listing/400961" target="_blank" rel="noopener">Check Availability</a>
        <a class="btn ghost" href="index.html">View Our Villa Photos</a>
      </div>
    </section>

    <h2 class="sectionTitle">Our Villa</h2>
    <section class="featureGrid" aria-label="Our Villa section">
      <div class="card">
        <p>
          Designed for families who want the best of both worlds: the excitement of the parks, and a peaceful place to truly recharge.
        </p>

        <ul class="bullets">
          <li>Private screened in splash pool with year round pool heat included</li>
          <li>Spa inspired interiors built for rest and calm evenings</li>
          <li>Multiple ensuite bedrooms for comfort and privacy</li>
          <li>Walkable to the Windsor Hills clubhouse and waterpark</li>
          <li>Quick access to Disney for a midday break during hot park days</li>
        </ul>

        <div class="ctaRow">
          <a class="btn primary" href="index.html">Explore the Villa</a>
          <a class="btn ghost" href="nearby.html">See Nearby Convenience</a>
        </div>

        <div class="welcomeNote">
          <strong>All guests are warmly welcome.</strong><br/>
          Enchanted Villa of Windsor Hills is a Christian owned property, and a portion of our profits is thoughtfully dedicated to charitable and faith based giving.
        </div>
      </div>

      <div class="card">
        <h2>Villa Gallery</h2>
        <p>Tap a photo to preview. Click the large photo to view full screen and swipe or use arrows.</p>

        <div class="galleryWrap">
          <button class="featuredBtn" id="villaFeaturedBtn" type="button" aria-label="Open villa photos full screen">
            <img id="villaFeatured" class="featuredImg" src="" alt="Featured villa photo" decoding="async" />
            <span class="zoomHint">View Photos</span>
          </button>
          <div id="villaMiniGallery" class="miniGallery" aria-label="Villa mini gallery"></div>
        </div>
      </div>
    </section>

    <h2 class="sectionTitle">Windsor Hills Resort</h2>
    <section class="featureGrid" aria-label="Windsor Hills section">
      <div class="card">
        <p>
          One of the most loved resort communities near Disney. Enjoy the amenities when you want energy, and come back to your calm when you want rest.
        </p>

        <ul class="bullets">
          <li>Gated community with 24 hour security</li>
          <li>Resort style lagoon pool, waterpark, and splash areas</li>
          <li>Clubhouse, fitness center, arcade, and movie theater</li>
          <li>Playgrounds, sports courts, and walking paths</li>
        </ul>

        <div class="ctaRow">
          <a class="btn primary" href="windsor-hills.html">Explore Windsor Hills</a>
          <a class="btn ghost" href="attractions.html">Plan Your Park Days</a>
        </div>
      </div>

      <div class="card">
        <h2>Resort Gallery</h2>
        <p>Tap a photo to preview. Click the large photo to view full screen and swipe or use arrows.</p>

        <div class="galleryWrap">
          <button class="featuredBtn" id="resortFeaturedBtn" type="button" aria-label="Open resort photos full screen">
            <img id="resortFeatured" class="featuredImg" src="" alt="Featured resort photo" decoding="async" />
            <span class="zoomHint">View Photos</span>
          </button>
          <div id="resortMiniGallery" class="miniGallery" aria-label="Resort mini gallery"></div>
        </div>
      </div>
    </section>

    <div class="footer">Enchanted Villa of Windsor Hills</div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Photo viewer">
    <div class="lightboxInner">
      <div class="lbTopRow">
        <div id="lbCounter">Photo</div>
        <button id="lbClose" class="lbBtn" type="button" aria-label="Close viewer">Close ✕</button>
      </div>

      <img id="lbImg" class="lightboxImg" src="" alt="Full size photo" decoding="async" />

      <div class="lbNav" aria-label="Lightbox navigation">
        <button id="lbPrev" class="lbArrow" type="button" aria-label="Previous photo">◀</button>
        <button id="lbNext" class="lbArrow" type="button" aria-label="Next photo">▶</button>
      </div>
    </div>
  </div>

  <script>
    // JSON files you asked for
    const VILLA_WEBP_JSON = "villa-photos.webp.json";
    const VILLA_JPG_JSON  = "villa-photos.json";
    const RESORT_WEBP_JSON = "resort-photos.webp.json";
    const RESORT_JPG_JSON  = "resort-photos.json";

    // Lightbox state
    let currentSet = [];
    let currentSetName = "";
    let lbIndex = 0;

    const villaFeatured = document.getElementById("villaFeatured");
    const resortFeatured = document.getElementById("resortFeatured");

    const lb = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbClose = document.getElementById("lbClose");
    const lbPrev = document.getElementById("lbPrev");
    const lbNext = document.getElementById("lbNext");
    const lbCounter = document.getElementById("lbCounter");

    function withJpgFallback(src, imgEl) {
      imgEl.onerror = () => {
        if (src && src.toLowerCase().endsWith(".webp")) {
          imgEl.onerror = null;
          imgEl.src = src.replace(/\.webp$/i, ".jpg");
        }
      };
    }

    async function fetchJsonPreferWebp(webpJson, jpgJson) {
      // Try WEBP JSON first, fall back to JPG JSON
      try {
        const res = await fetch(webpJson, { cache: "no-store" });
        if (!res.ok) throw new Error("webp json not ok");
        const data = await res.json();
        if (!Array.isArray(data) || !data.length) throw new Error("webp json empty");
        return data;
      } catch (_) {
        const res2 = await fetch(jpgJson, { cache: "no-store" });
        const data2 = await res2.json();
        return Array.isArray(data2) ? data2 : [];
      }
    }

    function setFeatured(featuredEl, src) {
      if (!featuredEl || !src) return;
      featuredEl.src = src;
      withJpgFallback(src, featuredEl);
    }

    function openLightbox(setArr, startIndex, setName) {
      currentSet = setArr.slice();
      currentSetName = setName || "Photos";
      lbIndex = startIndex || 0;

      lb.classList.add("open");
      document.body.style.overflow = "hidden";
      renderLightbox();
    }

    function closeLightbox() {
      lb.classList.remove("open");
      document.body.style.overflow = "";
    }

    function renderLightbox() {
      if (!currentSet.length) return;
      const src = currentSet[lbIndex];

      lbImg.src = src;
      withJpgFallback(src, lbImg);
      lbCounter.textContent = `${currentSetName} • ${lbIndex + 1} of ${currentSet.length}`;
    }

    function nextLb() {
      if (!currentSet.length) return;
      lbIndex = (lbIndex + 1) % currentSet.length;
      renderLightbox();
    }

    function prevLb() {
      if (!currentSet.length) return;
      lbIndex = (lbIndex - 1 + currentSet.length) % currentSet.length;
      renderLightbox();
    }

    // Close when clicking outside image
    lb.addEventListener("click", (e) => {
      if (e.target === lb) closeLightbox();
    });

    lbClose.addEventListener("click", closeLightbox);
    lbNext.addEventListener("click", nextLb);
    lbPrev.addEventListener("click", prevLb);

    // Keyboard
    document.addEventListener("keydown", (e) => {
      if (!lb.classList.contains("open")) return;
      if (e.key === "Escape") closeLightbox();
      if (e.key === "ArrowRight") nextLb();
      if (e.key === "ArrowLeft") prevLb();
    });

    // Swipe support
    let touchStartX = null;
    lbImg.addEventListener("touchstart", (e) => {
      touchStartX = e.changedTouches[0].clientX;
    }, { passive: true });

    lbImg.addEventListener("touchend", (e) => {
      if (touchStartX === null) return;
      const endX = e.changedTouches[0].clientX;
      const delta = endX - touchStartX;
      touchStartX = null;
      if (Math.abs(delta) < 40) return;
      delta < 0 ? nextLb() : prevLb();
    }, { passive: true });

    function buildGallery(containerId, featuredId, buttonId, photos, setName) {
      const strip = document.getElementById(containerId);
      const featured = document.getElementById(featuredId);
      const btn = document.getElementById(buttonId);

      if (!strip || !featured || !btn) return;

      strip.innerHTML = "";
      if (!photos.length) return;

      // Default featured
      setFeatured(featured, photos[0]);

      photos.forEach((src, idx) => {
        const img = document.createElement("img");
        img.loading = "lazy";
        img.decoding = "async";
        img.src = src;
        img.alt = "Preview photo";
        withJpgFallback(src, img);

        if (idx === 0) img.classList.add("active");

        img.addEventListener("click", () => {
          strip.querySelectorAll("img").forEach(x => x.classList.remove("active"));
          img.classList.add("active");
          setFeatured(featured, src);
        });

        strip.appendChild(img);
      });

      btn.addEventListener("click", () => {
        const currentSrc = featured.getAttribute("src");
        const start = Math.max(0, photos.indexOf(currentSrc));
        openLightbox(photos, start, setName);
      });
    }

    async function initHome() {
      try {
        const villaPhotos = await fetchJsonPreferWebp(VILLA_WEBP_JSON, VILLA_JPG_JSON);
        const resortPhotos = await fetchJsonPreferWebp(RESORT_WEBP_JSON, RESORT_JPG_JSON);

        buildGallery("villaMiniGallery", "villaFeatured", "villaFeaturedBtn", villaPhotos, "Villa Photos");
        buildGallery("resortMiniGallery", "resortFeatured", "resortFeaturedBtn", resortPhotos, "Resort Photos");
      } catch (e) {
        console.warn("Could not load gallery JSON files.");
      }
    }

    initHome();
  </script>
</body>
</html>
